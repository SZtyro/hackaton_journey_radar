# Map API Documentation

## Overview
This module provides a complete API service, repository pattern, and data models for managing map points and bus routes in the Journey Radar mobile application.

## Architecture

### Entities
- `MapPointEntity` - Core business model for map points
- `BusRouteEntity` - Core business model for bus routes

### DTOs (Data Transfer Objects)
- `MapPointDto` - JSON serializable model for API communication
- `BusRouteDto` - JSON serializable model for API communication

### API Service
- `MapApi` - Retrofit-based API service with all endpoints

### Repository Pattern
- `MapRepository` - Abstract interface for data operations
- `MapRepositoryImpl` - Concrete implementation using MapApi

## API Endpoints

### Map Points
- `GET /api/map/points` - Get all map points
- `GET /api/map/points/{id}` - Get specific map point
- `POST /api/map/points` - Create new map point
- `PUT /api/map/points/{id}` - Update map point
- `DELETE /api/map/points/{id}` - Delete map point
- `GET /api/map/search/points` - Search map points
- `GET /api/map/nearby/points` - Get nearby map points

### Bus Routes
- `GET /api/map/bus-routes` - Get all bus routes
- `GET /api/map/bus-routes/{id}` - Get specific bus route
- `POST /api/map/bus-routes` - Create new bus route
- `PUT /api/map/bus-routes/{id}` - Update bus route
- `DELETE /api/map/bus-routes/{id}` - Delete bus route
- `GET /api/map/search/bus-routes` - Search bus routes
- `GET /api/map/nearby/bus-routes` - Get nearby bus routes

## Usage Example

```dart
import 'package:journey_radar_mobile/map_data.dart';
import 'package:get_it/get_it.dart';

// Get repository from service locator
final mapRepository = GetIt.instance<MapRepository>();

// Get all map points
final result = await mapRepository.getMapPoints();
if (result is Success<List<MapPointEntity>, Exception>) {
  final mapPoints = result.data;
  // Use map points
}

// Create new map point
final newPoint = MapPointEntity(
  id: 'unique-id',
  position: LatLng(50.0647, 19.9450),
  title: 'New Point',
  iconType: 'landmark',
  color: '#FF5722',
  createdAt: DateTime.now(),
);

final createResult = await mapRepository.createMapPoint(
  mapPoint: newPoint,
);
```

## Service Locator Configuration

```dart
import 'package:journey_radar_mobile/config/map_service_locator.dart';

// Configure in your main.dart or service locator setup
MapServiceLocator.configure(getIt);
```

## Generated Files
The following files are automatically generated by build_runner:
- `lib/api/map_api.g.dart`
- `lib/dtos/map_point_dto.g.dart`
- `lib/dtos/bus_route_dto.g.dart`

To regenerate these files, run:
```bash
flutter packages pub run build_runner build
```
